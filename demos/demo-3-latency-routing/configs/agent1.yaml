# OpenGSLB Demo 3: Agent Configuration (webapp1 - FAST)
#
# This agent monitors the local nginx server and reports health to Overwatch.
# In this demo, webapp1 has LOW latency (5ms) making it the fastest server.

mode: agent

# Agent configuration
agent:
  identity:
    region: demo
    service_token: "demo-latency-token-2024"

  # Backend service this agent monitors
  backends:
    - service: app.demo.local
      address: 127.0.0.1
      port: 80
      weight: 100
      health_check:
        type: http
        path: /health
        interval: 2s
        timeout: 3s
        failure_threshold: 3
        success_threshold: 2

  # Gossip configuration to reach Overwatch
  gossip:
    encryption_key: "bGF0ZW5jeS1kZW1vLWtleS0yMDI0LXNlY3VyZS1rZXk="
    overwatch_nodes:
      - "10.30.0.10:7946"

  # Heartbeat settings
  heartbeat:
    interval: 5s
    missed_threshold: 3

# Metrics
metrics:
  enabled: true
  address: "0.0.0.0:9100"

# Logging
logging:
  level: info
  format: text
